<!--
    Why collapse is not working in Bootstrap 5?
    You have to use , data-bs-toggle="collapse" and data-bs-target="#collapseExample" insted of data-toggle="collapse" and and data-target 
    for Bootstrap 5. You can check the following updated snippet. thank you!
-->

<!-- This file will remain with all "Links" disabled, meaning all HREF's are blanked out. The original Menu with live links is still available with the menu_ORIGINAL.html -->

<div class="d-flex justify-content-center main-menu">
    <nav class="navbar navbar-expand-md navbar-light bg-light">
        <a class="nav-link {{ if .IsHome }} active fw-bold text-primary {{ end }} " href="{{ .Site.Home.Permalink }}">
            <img style="height: 50px;" href="{{ .Site.Home.Permalink }}" src="{{ site.Params.logo }}" class="logo" tabindex="0">
        </a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNavAltMarkup" aria-controls="navbarNavAltMarkup" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarNavAltMarkup">
            <ul class="navbar-nav flex-wrap">
                <li class="nav-item">
                    <a class="nav-link {{ if .IsHome }} active fw-bold text-primary {{ end }} " href="{{ .Site.Home.Permalink }}">Home</a>
                </li>

                {{ $currentPage := . }}

                {{ range .Site.Menus.main.ByWeight }}
                {{ if .HasChildren }}
                <li class="nav-item dropdown">
                    <a class='nav-link dropdown-toggle  {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active fw-bold text-primary {{ end }}' href="#"
                       id="navbarDropdownMenuLink" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                        {{ .Title }}
                    </a>

                    <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                        {{ range .Children }}
                        <li>
                            <a class='dropdown-item  {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{ end }}' href="#">  {{ .Title }}</a>
                        </li>
                        {{ end }}
                    </ul>
                </li>
                {{ else }}
                <li class="nav-item">
                    <a class='nav-link {{ if or ($currentPage.IsMenuCurrent "main" .) ($currentPage.HasMenuCurrent "main" .) }} active {{ end }}'
                       href="#">
                        {{ .Title }}
                    </a>
                </li>

                {{ end }}

                {{ end }}

            </ul>

        </div>
    </nav>
</div>

